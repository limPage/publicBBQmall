<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>BBQ몰 글목록</title>

    <th:block th:replace="~{fragments/head :: common}"></th:block>

    <link rel="stylesheet" th:href="@{/bbs/resources/stylesheets/board.css}">
    <script defer th:src="@{/bbs/resources/scripts/board.js}"></script>


</head>
<body>
<th:block th:replace="~{fragments/body :: header}"></th:block> <!-- block 자리에 body.html 파일의 replace 태그와 치환한다. -->
<th:block th:replace="~{fragments/body :: cover}"></th:block>


<main class="cs-center">
    <th:block th:replace="~{fragments/body ::sideBar}"></th:block>
    <div class="content">
        <div class="title-container">
            <h1 >공지사항</h1>
        </div>

        <form class="form" name="form">
<!--            <div class="search-row">-->
                <label>
<!--                    <select name="criterion" th:with="criterion = ${#request.getParameter('criterion')}">-->
<!--                        <option th:selected="${criterion ==null || criterion.equals('all')}" value=all>- 전체 -</option>-->
<!--                        <option th:selected="${criterion != null && criterion.equals('notice')}" value="notice">공지</option>-->
<!--                        <option th:selected="${criterion != null && criterion.equals('evnet')}" value="event">이벤트</option>-->
<!--                        <option th:selected="${criterion != null && criterion.equals('urgent')}" value="urgent">긴급공지</option>-->
<!--                    </select>-->
                    <select name="bid" class="bid" rel="bid">
                        <option  value="all" >- 전체 -</option>
                        <option value="notice">공지</option>
                        <option  value="event">이벤트</option>
                        <option  value="urgent">긴급공지</option>
                    </select>

                </label>

                <span class="spring"></span>

                <label>
                    <input type="text" placeholder="제목, 내용" th:value="${#request.getParameter('keyword')}" name="keyword">
                </label>

                <input type="submit" value="검색">
<!--            </div>-->
        </form>

        <table class="content-table">
            <thead>
            <tr>
                <td>     <h3 class="number">번호</h3></td>
                <td>     <h3 class="board-id">분류</h3></td>
                <td class="content-title">     <h3>제목</h3></td>
                <td>     <h3 class="written-on">등록일</h3></td>
                <td>     <h3 class="view-count">조회</h3></td>
            </tr>
            </thead>
            <tbody>
                <tr class="article-notice"  th:each="Notice: ${articleNotice}" >
                    <td>
                        <img th:src="@{/resources/images/icon_notice.gif}">
                    </td>

                    <td>
                        <h3 class="board-id" th:text="${Notice.getText()}">-</h3>
                    </td>



                    <td class="content-title">
                        <a th:href="@{/board/readNotice (nid=${Notice.getIndex()})}">
                            <h3  th:text="${Notice.getTitle()}">제목</h3>
<!--                            <img  alt="new" class="is-new-icon new"-->
<!--                                  th:src="@{/resources/images/icon_new.gif}">-->
                            <img  alt="new"
                                  th:if="${Notice.isNew()}"
                                  th:src="@{/resources/images/icon_new.gif}">

                            <img alt="hot" th:if="${Notice.getView()>0}"
                                 th:src="@{/resources/images/icon_hot.gif}">

                    </a></td>


                    <td>
                       <h3 class="written-on" th:text="${#dates.format(Notice.getModifiedOn(),'yyyy.MM.dd')}"> 2022.52.22</h3>
                    </td>
                    <td>
                        <h3 class="view-count" th:text="${Notice.getView()}">1</h3>
                    </td>
                </tr>

                <tr class="article" th:each="article: ${notice}" >
                    <td>
                        <h3 class="number" th:text="${article.getIndex()}">-</h3>
                    </td>

                    <td>
                        <h3 class="board-id" th:text="${article.getText()}">-</h3>
                    </td>

                    <input class="is-new" hidden th:value="${#dates.format(article.getModifiedOn(),'yyyyMMdd')}">


                    <td class="content-title">   <a th:href="@{/board/readNotice (nid=${article.getIndex()})}">  <h3  th:text="${article.getTitle()}">-</h3>
<!--                        <img  alt="new" class="is-new-icon new"-->
<!--                             th:src="@{/resources/images/icon_new.gif}">-->
                        <img  alt="new"
                        th:if="${article.isNew()}"
                              th:src="@{/resources/images/icon_new.gif}">


                        <img alt="hot" th:if="${article.getView()>0}"
                             th:src="@{/resources/images/icon_hot.gif}">



                    </a></td>


                    <td>
                        <h3 class="written-on" th:text="${#dates.format(article.getModifiedOn(),'yyyy.MM.dd')}"> 2022.52.22</h3>
                    </td>
                    <td>
                        <h3 class="view-count" th:text="${article.getView()}">1</h3>
                    </td>
                </tr>



            </tbody>
            <tfoot>
            <tr>
                <td colspan="5">
                    <!--                            with는 변수선언이라고 보면된다.-->
                    <div class="page-container" th:with="urlBulder = ${T(org.springframework.web.servlet.support.ServletUriComponentsBuilder).fromCurrentRequest()}">

                        <a class="page"
                           th:if ="${paging.requestPage >1}"
                           th:href="@{${urlBulder.replaceQueryParam('page', paging.minPage).build().toUriString()}}">


                            <i class="fa-solid fa-angles-left"></i>

                        </a>

                        <a class="page"
                           th:if ="${paging.requestPage >1}"
                           th:href="@{${urlBulder.replaceQueryParam('page', paging.requestPage -1).build().toUriString()}}">

                            <i class="fa-solid fa-angle-left"></i>
                        </a>

                        <!--                                시퀀스를하면 정수 시작부터 정수끝을 배열로 돌려준다.-->
                        <a th:each="page: ${#numbers.sequence(paging.startPage, paging.endPage)}"
                           th:class="${'page ' + (page==paging.requestPage? 'selected':'')}"
                           th:text="${page}"
                           th:href="@{${urlBulder.replaceQueryParam('page', page).build().toUriString()}}"

                        >
                            <!--                                    클릭시 값을 페이지라고 적혀ㅓ잇는곳을 페이지값으로 바꾸겟다 검색어에서도 사용하기위해 빌드쓴다-->

                        </a>


                        <a class="page"
                           th:if="${paging.requestPage < paging.maxPage}"
                           th:href="@{${urlBulder.replaceQueryParam('page', paging.requestPage +1).build().toUriString()}}">


                            <i class="fa-solid fa-angle-right"></i>

                        </a>

                        <a class="page"
                           th:if="${paging.requestPage < paging.maxPage}"
                           th:href="@{${urlBulder.replaceQueryParam('page', paging.maxPage).build().toUriString()}}">
                            <i class="fa-solid fa-angles-right"></i>
                        </a>

                    </div>
                </td>

            </tr>


            </tfoot>

        </table>



        <div class="write-notice-button">
        <a th:href="@{/board/writeNotice}">공지작성</a>
        </div>
    </div>


</main>


<th:block th:replace="~{fragments/body :: footer}"></th:block>

</body>
</html>